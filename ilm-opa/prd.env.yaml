env:
  ENV: prd
  ORG_APP: ilm-opa
  app:
    domain: &domain ilmatarbrain.com
    subdomain: &subdomain ilmatarbrain.com
    url: opa.ilmatarbrain.com

  dns:
    domain: *domain # ilmatarbrain.com
    wpb_fqdn: &wpb_fqdn opa.ilmatarbrain.com
    tld_domain: &tld_domain ilmatarbrain.com
    env_subdomain: &env_subdomain mmp
    fqn_env_subdomain: &fqn_env_subdomain opa.ilmatarbrain.com
    fqn_web_app_subdomain: &fqn_web_app_subdomain "opa.ilmatarbrain.com"
    tld_zone_name: &tld_zone_name "flok-fi-zone"
    prd_zone_name: &prd_zone_name "ilm-opa-prd-subzone"

  github_owner_org: &github_owner_org csitea
  versions:
    infra_version: 2.3.0
    terraform_version: 1.2.2

  gcp:
    GOOGLE_APPLICATION_CREDENTIALS: &google_application_credentials ~/.gcp/.ilm/key-ilm-opa-prd.json
    state_bucket: &state_bucket ilm-opa-prd-tf-state
    gcp_region: "europe-north1"
    gcp_project: "ilm-opa-prd"
    gcp_zone: "europe-north1-a"
    gcp_sa_email: &gcp_sa_email "ilm-opa-prd@ilm-opa-prd.iam.gserviceaccount.com"

  steps:
    000-gcp-remote-bucket:
      some_key: some_value

    008-gcp-subzones: # ilm-opa-prd
      gcp_subzone_domain: *tld_domain
      gcp_subzone_name: "ilm-opa-prd-subzone"
      fqn_web_app_subdomain: *fqn_web_app_subdomain
      fqn_env_subdomain: *fqn_env_subdomain
      tld_zone_name: *tld_zone_name
      prd_zone_name: *prd_zone_name
      gcp_sa_email: *gcp_sa_email
      all_org: flk

    015-gcp-remote-bucket:
      buckets:
        - name: ilm-opa-prd-db
          force_destroy: true
          location: "europe-north1"
          enable_versioning: false
          storage_class: "Standard"

    015-gcp-buckets-for-sites:
      wpb_fqdn: *wpb_fqdn
      buckets:
        - name: ilm-opa-prd-site
          force_destroy: true
          location: "europe-north1"
          enable_versioning: true
          storage_class: "Standard"

    120-github-general-secrets: # ilm-opa-prd
      # /home/ysg/.ssh/.str/id_rsa.sys+ilm-opa-crs@ilmatarbrain.com.pub
      crs_key_file_name: id_rsa.sys+ilm-opa-crs@ilmatarbrain.com.pub

    130-org-app-gcp-vm: # ilm-opa-prd
      google_compute_disk_type: "pd-ssd"
      google_compute_disk_size: "20" # this is the data disk
      google_compute_instance_machine_type: "e2-standard-2"
      google_compute_instance_machine_image: "debian-cloud/debian-12"
      google_compute_boot_disk_size: "30" # this IS where the OS is loaded
      fqn_host_name: "opa.ilmatarbrain.com"
      host_name: "wpb"
      box_domain_email: "sys+ilm-opa-prd@ilmatarbrain.com"
      use_staging_ssl: true
      # vm_full_name = "${var.org}-${var.app}-${var.env}-${var.host_name}"
      gcp_vm_name: ilm-opa-prd-wpb-vm

    131-gcp-vm-www-data-setup: # ilm-opa-prd
      fqn_host_name: "opa.ilmatarbrain.com"
      host_name: "wpb"
      box_domain_email: "sys+ilm-opa@ilmatarbrain.com"
      gcp_vm_name: ilm-opa-prd-wpb-vm

    140-gcp-cloud-monitor: # ilm-opa-prd
      sender_email: sys@ilmatarbrain.com
      recipient_email: yordan.georgiev@csitea.net
      smtp_server: smtp.gmail.com
      smtp_port: 587
      smtp_username: sys@ilmatarbrain.com
      gcp_region: "europe-west1"
      gcp_zone: "europe-west1-a"
      kbdx_db_key_file_name: id_rsa.sys+ilm-opa-crs@ilmatarbrain.com.pub
      # cron_schedule: "1 * * * *" # every 5 minutes
      cron_schedule: "0 * * * *" # Every hour
